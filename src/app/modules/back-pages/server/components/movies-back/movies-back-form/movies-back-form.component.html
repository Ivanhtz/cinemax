<form [formGroup]="movieForm" (ngSubmit)="onSubmit()">

  <h2 *ngIf="isEditing">Editar película</h2>
  <h2 *ngIf="!isEditing">Nueva película</h2>

  <!-- Campo de Título -->
  <mat-form-field class="full-width">
    <input matInput placeholder="Título" formControlName="title">
    <mat-error *ngIf="movieForm.controls['title'].hasError('required')">Título es <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['title'].hasError('minlength')">Título debe tener al menos 2
      caracteres.</mat-error>
    <mat-error *ngIf="movieForm.controls['title'].hasError('maxlength')">Título no debe exceder 100
      caracteres.</mat-error>
  </mat-form-field>

  <!-- Campo de Director -->
  <mat-form-field class="full-width">
    <input matInput placeholder="Director" formControlName="director">
    <mat-error *ngIf="movieForm.controls['director'].hasError('required')">Director es
      <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['director'].hasError('minlength')">Director debe tener al menos 2
      caracteres.</mat-error>
    <mat-error *ngIf="movieForm.controls['director'].hasError('maxlength')">Director no debe exceder 50
      caracteres.</mat-error>
  </mat-form-field>

  <!-- Campo de Puntuación -->
  <mat-form-field class="full-width">
    <input matInput type="number" min="1" max="10" step="0.1" placeholder="Puntuación" formControlName="score">
    <mat-error *ngIf="movieForm.controls['score'].hasError('required')">Puntuación es
      <strong>requerida</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['score'].hasError('min')">Puntuación debe ser al menos 1.</mat-error>
    <mat-error *ngIf="movieForm.controls['score'].hasError('max')">Puntuación no debe ser mayor a 10.</mat-error>
  </mat-form-field>


  <!-- Campo de Año -->
  <mat-form-field class="full-width">
    <input matInput type="number" min="1880" max="{{currentYear}}" step="1" placeholder="Año" formControlName="year">
    <mat-error *ngIf="movieForm.controls['year'].hasError('required')">Año es <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['year'].hasError('min')">Año debe ser al menos 1880.</mat-error>
    <mat-error *ngIf="movieForm.controls['year'].hasError('max')">Año no debe ser mayor a {{currentYear}}.</mat-error>
  </mat-form-field>

  <!-- Campo de Género -->

  <!-- Campo de Género -->
  <mat-form-field class="full-width">
    <mat-label>Género</mat-label>
    <mat-select formControlName="genre">
      <mat-option value="accion">Acción</mat-option>
      <mat-option value="comedia">Comedia</mat-option>
      <mat-option value="drama">Drama</mat-option>
      <mat-option value="belico">Belico</mat-option>
      <mat-option value="animacion">Animación</mat-option>
      <mat-option value="terror">Terror</mat-option>
      <mat-option value="aventura">Aventura</mat-option>
    </mat-select>
    <mat-error *ngIf="movieForm.controls['genre'].hasError('required')">Género es <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['genre'].hasError('invalidGenre')">Género debe ser uno de los siguientes:
      acción, comedia, drama, belico, animacion, terror, aventura.</mat-error>
  </mat-form-field>

  <!-- Campo de Resumen -->
  <mat-form-field class="full-width">
    <textarea matInput placeholder="Resumen" formControlName="abstract"></textarea>
    <mat-error *ngIf="movieForm.controls['abstract'].hasError('required')">Resumen es
      <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['abstract'].hasError('minlength')">Resumen debe tener al menos 10
      caracteres.</mat-error>
    <mat-error *ngIf="movieForm.controls['abstract'].hasError('maxlength')">Resumen no debe exceder 500
      caracteres.</mat-error>
  </mat-form-field>

  <!-- Campo de URL de imagen -->
  <mat-form-field class="full-width">
    <input matInput placeholder="URL de imagen" formControlName="img">
    <mat-error *ngIf="movieForm.controls['img'].hasError('required')">URL de imagen es
      <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['img'].hasError('pattern')">La URL de la imagen no es válida.</mat-error>
  </mat-form-field>

  <!-- Campo de Texto -->
  <mat-form-field class="full-width">
    <textarea matInput placeholder="Texto" formControlName="text"></textarea>
    <mat-error *ngIf="movieForm.controls['text'].hasError('required')">Texto es <strong>requerido</strong></mat-error>
    <mat-error *ngIf="movieForm.controls['text'].hasError('minlength')">Texto debe tener al menos 10
      caracteres.</mat-error>
    <mat-error *ngIf="movieForm.controls['text'].hasError('maxlength')">Texto no debe exceder 1000
      caracteres.</mat-error>
  </mat-form-field>

  <button type="button" mat-raised-button color="primary" [disabled]="movieForm.invalid" (click)="onSubmit()">
    Guardar
  </button>
  <button type="button" mat-raised-button color="warn" (click)="cancel()">Cancelar</button>

</form>